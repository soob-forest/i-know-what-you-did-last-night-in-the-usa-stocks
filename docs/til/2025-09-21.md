# TIL: SDUI 기반 대시보드 고도화와 품질 강화

## 오늘의 핵심 결정/성과
- 아키텍처 정리: Next.js(App Router) + Spring Boot(API) + Collector(NestJS) 유지. 대시보드는 SSR/ISR.
- SDUI 도입: 서버가 UIBlock 스키마(`/ui/app`)를 내려주고, 클라이언트가 화이트리스트 레지스트리로 안전 렌더.
- 문서화 체계: 모든 의사결정은 ADR로 기록(0001–0010), 테스트 가이드/HTTP 샘플 추가.

## 백엔드
- /news 엔드포인트 구현(CORS 포함): 구독/티커 기반으로 당일 뉴스+링크 반환.
- NewsLink 모델 도입(JPA/Prisma): Collector가 원문 링크 저장.
- AppUiService 신설: 스키마 조립 책임 분리, 서버 Props Guard 적용
  - 필수 필드 검증, URL 스킴 allowlist(http/https), 링크 수 제한(기본 5)
  - EmptyState 블록(데이터 없을 때)과 응답 버전(version=v1)
  - 짧은 TTL 캐시(기본 30s) + 구독 변경 시 userId 단위 캐시 무효화

## 프런트엔드
- 컴포넌트화: Container, Toolbar, NewsGrid, NewsCard, SourceBadge, EmptyState, UnsupportedBlock
- 스타일링: Tailwind 도입(라이트 테마, 반응형, 카드 호버 확대/그림자)
- SDUI Renderer/Registry: 서버 스키마 렌더, 버전 분기, 미지원 블록 폴백

## 테스트
- Java: 서비스/컨트롤러(WebMvcTest), Slack 단위(Mockito), AppUiService/Controller/SubscriptionService 테스트
- Collector: RSS→요약→링크 매핑 Jest 테스트
- E2E: Playwright + 미들웨어 스텁으로 `/app`(기본/SDUI), 빈 상태/오류/토글 시나리오

## 의미/다음
- 서버 주도 UI로 레이아웃/구성 변경 민첩성 확보, 안정성(가드/버전/캐시) 강화
- 다음: 도메인 allowlist(선택), 캐시 정책 고도화, CI에 E2E 추가, SDUI 블록(헤더/페이지네이션) 확장
